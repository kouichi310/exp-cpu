# ToyCC 仕様

ToyCC は教育用CPUシミュレータ向けに作られた最小構成のコンパイラです。

## 言語機能
- 型は `byte` のみ(0〜255 の整数)
- 変数宣言 `byte x;`
- 代入文 `x = y + 1;` や `x = y - z;` の形式
  - 加算/減算の右辺は変数または数値リテラルを1つまで
  - `if`/`else` と `while` による簡単な分岐とループをサポート
  - `in`/`out` による1バイト入出力
  - `name[n]` 形式の簡易配列アクセス
  - 変数はメモリ上で `0x100` から順に配置され、配列は連続領域を占有
  - 関数定義は未対応

## 静的解析
- すべての変数は使用前に宣言する必要があります
- 定数は 0〜255 の範囲に制限されます

## 出力形式
`.text` ディレクティブから始まり、1行1バイトの16進表記を並べた
テキストファイルを生成します。シミュレータの `r` コマンドでそのまま読み込めます。
プログラム末尾には `HLT`(0x0F) を自動で付加します。

## コンパイル例
入力(`sample.tc`):
```c
byte x;
byte y;
x = 1;
y = x + 2;
```

出力例:
```
.text 0
62
01
75
00
65
00
b2
02
75
01
0f
```
メモリ0x100に`x`, 0x101に`y`が割り当てられます。
