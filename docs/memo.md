以下では **教育用CPU本体** と **教育用CPUシミュレータ** の仕様をそれぞれ Markdown で簡潔にまとめました。

---

## 教育用 CPU 仕様

| 区分          | 内容                                                                                                                                                                                                                                     |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **語長**      | 1 語 = **8 bit**                                                                                                                                                                                                                        |
| **レジスタ**    | - **ACC**（アキュムレータ）  <br>- **IX**（インデックスレジスタ）                                                                                                                                                                                           |
| **主記憶**     | - **512 byte** 内蔵メモリ（9 bit アドレス）<br>  - 0x000–0x0FF : **プログラム領域**<br> - 0x100–0x1FF : **データ領域**（プログラム実行不可）                                                                                                                             |
| **データ形式**   | - 基本は 8 bit 固定小数点<br>- 多倍長演算は 2 語, 3 語 … と拡張可能                                                                                                                                                                                         |
| **アドレス方式**  | 4 種類<br> 1. **レジスタ指定** (ACC / IX)<br> 2. **即値** `d`<br> 3. **絶対** `[d]` / `(d)`（プログラム / データ領域）<br> 4. **IX 修飾** `[IX+d]` / `(IX+d)`                                                                                                    |
| **命令セット概要** | - **データ移動** `LD / ST`<br>- **算術** `ADD, ADC, SUB, SBC, CMP`<br>- **論理** `AND, OR, EOR`<br>- **シフト/ローテート** `SRA/SLA/SRL/SLL, RRA/RLA/RRL/RLL`<br>- **分岐** `BA, BNZ, BGE …`（条件 16 種）<br>- **制御** `NOP, HLT, IN, OUT, RCF, SCF, JAL, JR`  |
| **フラグ**     | - **CF** (Carry/Borrow)<br>- **VF** (Overflow)<br>- **NF** (Negative)<br>- **ZF** (Zero)                                                                                                                                               |

---

## 教育用 CPU シミュレータ仕様

### 起動 & 対象 CPU

* 実行ファイルをそのまま起動。引数不要。
* プロンプト例: `CPU0,PC=0x0>` — `t` コマンドで **CPU0 / CPU1** をトグル&#x20;

### コマンド一覧（1 文字）

|        Cmd       | 機能             | 備考                                                      |
| :--------------: | -------------- | ------------------------------------------------------- |
|     `h` / `?`    | ヘルプ表示          | すべてのコマンド概要を一覧表示                                         |
|        `q`       | シミュレータ終了       | ―                                                       |
|        `t`       | 操作対象 CPU 切替    | CPU0 ↔ CPU1                                             |
|    `r <file>`    | プログラム／データを読み込み | `<file>` 内は 16 進バイト列。`.text` / `.data` ディレクティブで書込み先変更可  |
|        `d`       | レジスタ & フラグ表示   | ACC, IX, CF/VF/NF/ZF 等                                  |
|  `s <reg> <val>` | レジスタ／フラグ設定     | 16 進値で指定                                                |
|    `m [addr]`    | メモリ 16 byte 表示 | 引数なしで全域表示                                               |
| `w <addr> <val>` | メモリ書込み         | ―                                                       |
|        `i`       | **1 命令実行**     | PC が自動更新される                                             |
|     `c [bp]`     | 連続実行           | HLT か **500 命令** 実行、または **ブレークポイント** `bp` 到達で停止         |

> ※ コマンド実装は内部で `step()` を呼び出し 1 命令をシミュレートする。完成させるべき核心関数は `step()` 一つのみ&#x20;

### シミュレーション機能

1. **命令シミュレーション** — 教育用 CPU のマシン命令を忠実に実行
2. **コンソール機能** — 上記コマンドでプログラム投入・デバッグ・実行制御を行う&#x20;

---

### 参考: プログラム入力フォーマット例

```
a1 a2
.data 8c
c1 c2 c3 c4 c5
.text 50
20 4d 0f
```

* 0x000–0x001 ← `a1 a2`
* 0x18C–0x190 ← `c1 … c5`
* 0x050–0x052 ← `20 4d 0f`&#x20;

---

これで両 PDF に記載されている **仕様部分** を網羅的にまとめました。必要に応じて各表やリストを詳細化してご利用ください。
